# SNMP (161)

---

<br>


### 1) SNMP Enumeration 

**onesixtyone** (for finding SNMP servers)
- a) build text file containing community strings and the IP addresses you want to scan
	- i.e. `echo public > community` -> `echo private >> community` -> `echo manager >> community`
	- i.e. `for ip in $(seq 1 254); do echo 10.11.1.$ip; done > ips`
- b) scan IP addresses using community strings
	- i.e. `onesixtyone -c community -i ips`

**snmpwalk**
- gets information from machines running SNMP, provided you know the SNMP read-only community string (in most cases is "public")
- to see it's manual: `snmpwalk -h` 
- basic usage: `snmpwalk -v<snmp_version> -c <community_string> -t <target>`
	- i.e. `snmpwalk -v2c -c public -t 192.168.4.34`
- using with an OID: `snmpwalk -v <snmp_version> -c <community_string> <target> <OID>`
	- i.e. to get information about software insatlled on the machine `snmpwalk -v 2c -c public 192.168.4.34 hrSWInstalledName`
	- i.e. to get information about the size of the RAM on the machine `snmpwalk -v 2c -c public 192.168.4.34 hrMemorySize`
- enumerating Windows users: 
	- i.e. `snmpwalk -c public -v1 10.11.1.14 1.3.6.1.4.1.77.1.2.25`
- enumerating running Windows processes:
	- i.e. `snmpwalk -c public -v1 10.11.1.73 1.3.6.1.2.1.25.4.2.1.2`
- enumerating open TCP ports:
	- i.e. `snmpwalk -c public -v1 10.11.1.14 1.3.6.1.2.1.6.13.1.3`
- enumerating installed software:
	- i.e. `snmpwalk -c public -v1 10.11.1.50 1.3.6.1.2.1.25.6.3.1.2`

**snmpset**
- sets SNMP variables on machines running SNMP
- basic usage: `snmpset -v <snmp_version> -c <community_string> <target> <OID_to_change> <type> <value>`
	- i.e. to change the system contact information to the *string* *els* `snmpset -v 2c -c public <target> sysContact.0 s els`

**nmap**
- to return users on the target machine `sudo nmap -sU -p 161 --script=snmp-win32-users <target>`
- to run all snmp script: `sudo nmap -sU -p 161 --script snmp-* <target>`






<br>

### 2) SMNP Exploitation 

Brute force community string:
- **nmap**: `sudo nmap -sU -p 161 --script=snmp-brute <target>`
- **onesixtyone**: `sudo onesixtyone -c /usr/share/onesixtyone/dict.txt <target>`