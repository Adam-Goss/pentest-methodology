# DNS (53)

---

### 1) DNS Enumeration

<br>

- check version -- is it exploitable?
- if you can compromise machine then check for DNS information, may lead to hidden virtual hosts

<br>

host:
- find IP address (forward lookup): `host <domain>`
- find another type of DNS record: `host -t <record> <domain>`
	- i.e. `host -t mx megacorpone.com`
- find hostname for IP address (reverse lookup): `host <ip_address>`
	- i.e. `for ip in $(seq 50 100); do host 38.100.193.$ip; done | grep -v "not found"`
- zone transfer: `host -l <domain> <dns_server_address>`
	- i.e. `host -l megacorpone.com ns1.megacorpone.com`
	- try each DNS nameserver found (i.e. ns1., ns2., ns3., etc.)
	- get nameservers with `host -t ns <domain> | cut -d " " -f 4`
- 

nslookup and dig:
- DNS lookup: `nslookup <domain>` == `dig <domain>`
- Reverse DNS lookup: `nslookup -query=PTR <ip_address>` == `dig <ip_address> PTR`
- MX lookup: `nslookup -query=MX <domain>` == `dig <domain> MX`
- name server lookup: `nslookup -query=NS <domain>` == `dig <domain> NS`
- query all: `nslookup -query=all <domain>`
- zone transfer:
	 ```bash
	 $ nslookup
	 > server <nameserver_for_domain>
	 > ls -d
	 ```
	- `dig +nocmd <domain> AXFR +noall +answer @<DNS_server>`
	- or `dig @<DNS_server> <domain> -t AXFR +nocookie`
	- or `host -t axfr <domain> <DNS_server>`

fierce:
- `fierce <domain>`
- to use specific nameserver: : `fierce --domain <domain> --dns-servers <dns_nameserver>`

DNSEnum:
- `dsnenum <domain>`
- i.e. `dnsenum megacorpone.com`
- to use a specific nameserver: `dnsenum <domain> --dnsserver <dns_nameserver>`
- to brute force DNS names:  `dnsenum <domain> -f <path/to/wordlist>`

DNSMap:
- `dnsmap <domain>`
- to use user-supplied wordlist: `-w <wordlist>`
- to save results to a directory `-d <dreictory>`

DNSRecon:
- usage: `dnsrecon -d <domain> -t <type_of_enumeration>`
- i.e. zone transfer: `dnsrecon -d megacorpone.com -t axfr`
- i.e. brute force hostnames: `dnsrecon -d megacorpone.com -D hostnames.txt -t brt`


<br>

--- 

### 2) DNS Exploitation 

<br>