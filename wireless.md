# Wireless Pentesting WPA2 


### 1) Setup 

- find a compatible wireless interface/dongle that can be used with Kali for wireless pentesting (google it)
- connect device and allow access to Kali VM
- once device is attached run `iwconfig` in Kali to confirm it is connected

<br>

### 2) Capturing traffic 

- put card in "monitor" mode to capture traffic
- first, kill processes that may interfere with monitoring by running `airmon-ng check kill`
- next, start monitor mode on the wireless interface by running `airmon-ng start <iface>`
	- i.e. `airmon-ng start wlan0` 
- confirm new monitoring interface is running with `iwconfig` and should see `<iface>mon` (i.e. `wlan0mon`)
- run `airodump-ng <iface>` to monitor devices in range 
	- i.e. `airodump-ng wlan0mon`
	- the lower the PWR (power) level the closer you are to the device 
- locate the network you are attacking from the list of devices avaliable and run `airodump-ng -c <channel> --bssid <target_mac> -w <capture_file> <iface>` to capture traffic going to/from the target network 
	- i.e. `airodump-ng -c 6 --bssid 50:C7:BF:8A:00:73 -w capture wlan0mon` 
- wait for a client to connect to the network to capture the WPA2 handshake so you can crack it 

<br> 

### 3) De-authenticate a user

- to speed up the process you can de-authenticate a user (kick them off the wireless network) and capture their handshake when you automatically reconnect 
- this may not be successful the first time so try different clients (MAC address under STATION in the capture screen) and retry if failed
- don't de-authenticate the same client over and over again 
- to de-authenticate someone, while capture is running,  execute the command `aireplay-ng -0 1 -a <AP_MAC> -c <client_MAC> <iface>` 
	- the `-0` means de-authenticate and `1` means run this attack once
	- the `<AP_MAC>` is the BSSID of the router/access point you are attacking and the `<client_MAC>` is the STATION which was captured sending traffic to the AP 
	- i.e. `aireplay-ng -0 1 -a 50:C7:BF:8A:00:73 -c 3C:F0:11:22:DB:E3`
- if successful, in the capture screen running you will see "WPA handshake" 

<br>

### 4) Crack password 

- find the capture file containing the captured WPA2 handshake 
- find/create a word list to use for the cracking process
- run `aircrack-ng -w <wordlist> -b <AP_MAC> <capture_file>` to crack the password
	- i.e. `aircrack-ng -w words.txt -b 50:C7:BF:8A:00:73 capture.cap` 
- you can also use hashcat to crack the WPA2 password 
- default and weak passwords will be cracked, but complex passwords will take too long



